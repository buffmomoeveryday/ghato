{% extends "base.html" %}
{% load partials %}
{% block main %}
    <div class="flex justify-between items-center mb-4">
        <input type="text"
               id="table-search"
               placeholder="Search..."
               class="block w-full md:w-1/3 px-4 py-2 border rounded-md focus:ring-indigo-500">
    </div>
    <h1 class="text-2xl font-semibold mb-4">Movement</h1>
    <table class="min-w-full bg-white border">
        <thead>
            <tr>
                <th class="py-2 px-4 border">Product</th>
                <th class="py-2 px-4 border text-green-600">Stock In</th>
                <th class="py-2 px-4 border text-red-600">Stock Out</th>
                <th class="py-2 px-4 border text-red-600">Total Quantity</th>
                <th class="py-2 px-4 border">Movement Type</th>
                <th class="py-2 px-4 border">Description</th>
            </tr>
        </thead>
        <tbody>
            {% for movement in movements %}
                <tr>
                    <td class="py-2 px-4 border">{{ movement.product.name }}</td>
                    {% if movement.movement_type == "IN" or movement.movement_type == "IN SALES RETURN" %}
                        <td class="py-2 px-4 border text-green-600">{{ movement.quantity }}</td>
                        <td class="py-2 px-4 border"></td>
                        <!-- Empty column for out movements -->
                    {% elif movement.movement_type == "OUT" or movement.movement_type == "OUT PURCHASE RETURN" %}
                        <td class="py-2 px-4 border"></td>
                        <!-- Empty column for in movements -->
                        <td class="py-2 px-4 border text-red-600">{{ movement.quantity }}</td>
                    {% endif %}
                    <td class="py-2 px-4 border">{{ movement.product.stock_quantity }}</td>
                    <td class="py-2 px-4 border">{{ movement.movement_type }}</td>
                    <td class="py-2 px-4 border">{{ movement.description }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock main %}
